// ============================================
// SIDEBAR LAYOUT - Pro Style
// ============================================

.sidebar {
    width: @sidebar-width;
    background-color: @bg-body; // Seamless look with main content
    border-right: 1px solid @border-default;
    display: flex;
    flex-direction: column;
    position: fixed;
    height: 100vh;
    z-index: @z-fixed;
    padding: 0 1rem;

    @media (max-width: @breakpoint-md) {
        display: none;
    }
}

// Brand Section - Clean & Minimal
.brand-section {
    height: 70px;
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 1rem;
    padding: 0 0.5rem;
    flex-shrink: 0;
}

.brand-logo {
    width: 42px;
    height: 42px;
    display: grid;
    place-items: center;
    flex-shrink: 0;
    position: relative;

    // Subtle glow behind logo
    &::before {
        content: '';
        position: absolute;
        inset: -6px;
        background: radial-gradient(circle, rgba(99, 102, 241, 0.35) 0%, transparent 70%);
        border-radius: 14px;
        filter: blur(10px);
        opacity: 0.85;
        z-index: -1;
    }

    img {
        width: 100%;
        height: 100%;
        filter: drop-shadow(0 0 8px rgba(99, 102, 241, 0.4));
    }
}

.brand-text {
    font-size: 1.15rem;
    font-weight: @font-weight-bold;
    color: @text-primary;
    letter-spacing: -0.02em;
    background: linear-gradient(135deg, @text-primary 0%, #a5b4fc 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

// Star button in brand section
.brand-star {
    margin-left: auto;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 28px;
    height: 28px;
    border-radius: 50%;
    color: @text-tertiary;
    transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
    position: relative;
    overflow: visible;

    svg {
        position: relative;
        z-index: 2;
        transition: all 0.3s ease;
    }

    .star-particles,
    .star-ring,
    .star-tooltip {
        pointer-events: none;
        position: absolute;
    }

    .star-particles {
        inset: 0;

        span {
            position: absolute;
            width: 4px;
            height: 4px;
            background: #f59e0b;
            border-radius: 50%;
            opacity: 0;
            top: 50%;
            left: 50%;
        }
    }

    .star-ring {
        inset: 0;
        border-radius: 50%;
        border: 2px solid #f59e0b;
        opacity: 0;
        transform: scale(0.8);
    }

    .star-tooltip {
        top: 50%;
        left: calc(100% + 10px);
        transform: translateY(-50%) translateX(-4px);
        background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
        color: white;
        font-size: 0.65rem;
        font-weight: 600;
        padding: 4px 10px;
        border-radius: 6px;
        white-space: nowrap;
        opacity: 0;
        box-shadow: 0 4px 12px rgba(245, 158, 11, 0.4);

        &::after {
            content: '';
            position: absolute;
            top: 50%;
            left: -4px;
            transform: translateY(-50%);
            border-top: 5px solid transparent;
            border-bottom: 5px solid transparent;
            border-right: 5px solid #d97706;
        }
    }

    &:hover {
        color: #f59e0b;
        background: rgba(245, 158, 11, 0.15);
        transform: scale(1.1);
        box-shadow: 0 0 20px rgba(245, 158, 11, 0.3);
    }

    &:active {
        transform: scale(0.95);
    }

    // Animation state
    &.animating {
        animation: starPop 1.5s cubic-bezier(0.34, 1.56, 0.64, 1);

        svg {
            color: #f59e0b;
            animation: starSpin 1.5s cubic-bezier(0.34, 1.56, 0.64, 1), starGlow 1.5s ease-in-out;
        }

        // Particles explosion
        .star-particles span {
            animation: particleBurst 1s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;

            &:nth-child(1) { --angle: 0deg; --distance: 20px; animation-delay: 0.1s; }
            &:nth-child(2) { --angle: 60deg; --distance: 24px; animation-delay: 0.15s; }
            &:nth-child(3) { --angle: 120deg; --distance: 18px; animation-delay: 0.1s; }
            &:nth-child(4) { --angle: 180deg; --distance: 22px; animation-delay: 0.2s; }
            &:nth-child(5) { --angle: 240deg; --distance: 20px; animation-delay: 0.12s; }
            &:nth-child(6) { --angle: 300deg; --distance: 26px; animation-delay: 0.18s; }
        }

        // Multiple rings
        .star-ring {
            animation: ringExpand 0.8s cubic-bezier(0.22, 1, 0.36, 1) forwards;

            &.ring-2 {
                animation-delay: 0.15s;
                border-color: #fbbf24;
            }

            &.ring-3 {
                animation-delay: 0.3s;
                border-color: #fcd34d;
                border-width: 1px;
            }
        }

        // Tooltip appears
        .star-tooltip {
            animation: tooltipPop 1.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
        }

        // Background flash
        &::before {
            content: '';
            position: absolute;
            inset: -4px;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(245, 158, 11, 0.4) 0%, transparent 70%);
            animation: bgFlash 0.6s ease-out forwards;
            z-index: -1;
        }

        // Shine sweep
        &::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 200%;
            height: 100%;
            background: linear-gradient(
                90deg,
                transparent,
                rgba(255, 255, 255, 0.6),
                transparent
            );
            animation: shineSweep 0.5s 0.2s ease-out forwards;
            border-radius: 50%;
            z-index: 3;
        }
    }
}

// Star icon spin
@keyframes starSpin {
    0% {
        transform: rotate(0deg) scale(1);
    }
    25% {
        transform: rotate(-15deg) scale(1.2);
    }
    50% {
        transform: rotate(15deg) scale(1.3);
    }
    75% {
        transform: rotate(-5deg) scale(1.1);
    }
    100% {
        transform: rotate(0deg) scale(1);
    }
}

// Smooth bounce pop
@keyframes starPop {
    0% {
        transform: scale(1);
    }
    20% {
        transform: scale(1.4);
    }
    40% {
        transform: scale(1.1);
    }
    60% {
        transform: scale(1.25);
    }
    80% {
        transform: scale(1.15);
    }
    100% {
        transform: scale(1);
    }
}

// Icon glow pulse
@keyframes starGlow {
    0%, 100% {
        filter: drop-shadow(0 0 2px rgba(245, 158, 11, 0.4));
    }
    30% {
        filter: drop-shadow(0 0 8px rgba(245, 158, 11, 1))
               drop-shadow(0 0 16px rgba(245, 158, 11, 0.8))
               drop-shadow(0 0 24px rgba(245, 158, 11, 0.4));
    }
    60% {
        filter: drop-shadow(0 0 6px rgba(245, 158, 11, 0.8));
    }
}

// Particles burst outward
@keyframes particleBurst {
    0% {
        opacity: 1;
        transform: translate(-50%, -50%) rotate(var(--angle)) translateY(0) scale(1);
    }
    50% {
        opacity: 1;
        transform: translate(-50%, -50%) rotate(var(--angle)) translateY(calc(var(--distance) * -0.7)) scale(1.2);
    }
    100% {
        opacity: 0;
        transform: translate(-50%, -50%) rotate(var(--angle)) translateY(calc(var(--distance) * -1)) scale(0);
    }
}

// Ring that expands outward
@keyframes ringExpand {
    0% {
        transform: scale(0.8);
        opacity: 1;
    }
    100% {
        transform: scale(2.5);
        opacity: 0;
    }
}

// Tooltip pop in and out
@keyframes tooltipPop {
    0% {
        opacity: 0;
        transform: translateY(-50%) translateX(-4px) scale(0.8);
    }
    20% {
        opacity: 1;
        transform: translateY(-50%) translateX(0) scale(1.05);
    }
    30% {
        transform: translateY(-50%) translateX(0) scale(1);
    }
    70% {
        opacity: 1;
        transform: translateY(-50%) translateX(0) scale(1);
    }
    100% {
        opacity: 0;
        transform: translateY(-50%) translateX(4px) scale(0.9);
    }
}

// Background glow flash
@keyframes bgFlash {
    0% {
        opacity: 0;
        transform: scale(0.5);
    }
    30% {
        opacity: 1;
        transform: scale(1.5);
    }
    100% {
        opacity: 0;
        transform: scale(2);
    }
}

// Shine sweep across
@keyframes shineSweep {
    0% {
        left: -200%;
        opacity: 1;
    }
    100% {
        left: 100%;
        opacity: 0;
    }
}

// Scrollable Navigation Container
.nav-scroll {
    flex: 1;
    overflow-y: auto;
    overflow-x: hidden;

    // Hide scrollbar visually but keep functionality
    scrollbar-width: none;
    -ms-overflow-style: none;

    &::-webkit-scrollbar {
        display: none;
    }
}

// Navigation Category Labels
.nav-category {
    font-size: 0.7rem;
    font-weight: @font-weight-semibold;
    color: @text-secondary;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    margin: 1.5rem 0 0.5rem 0.75rem;
    opacity: 0.6;

    &:first-of-type {
        margin-top: 0.5rem;
    }
}

// Navigation
.nav {
    display: flex;
    flex-direction: column;
    gap: 2px;
}

// Navigation Item
.nav-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 0.5rem 0.75rem;
    border-radius: @radius-lg;
    color: @text-tertiary;
    text-decoration: none;
    font-size: 0.85rem;
    font-weight: @font-weight-medium;
    transition: all 0.2s ease;
    margin-bottom: 2px;
    position: relative;

    // Pro Hover State
    &:hover {
        color: @text-primary;
        background-color: rgba(255, 255, 255, 0.03);
    }

    // Pro Active State
    &.active {
        background-color: @accent-glow;
        color: @accent-primary;

        // Active Indicator Dot
        &::after {
            content: '';
            position: absolute;
            right: 8px;
            width: 4px;
            height: 4px;
            border-radius: 50%;
            background-color: @accent-primary;
            box-shadow: 0 0 6px @accent-primary;
        }
    }
}

// Sub Navigation Item (indented under parent)
.nav-sub-item {
    padding-left: 2.25rem;
    font-size: 0.8rem;
}

// Navigation Icon
.nav-icon {
    width: 18px;
    height: 18px;
    stroke: currentColor;
    stroke-width: 2px;
    stroke-linecap: round;
    stroke-linejoin: round;
    fill: none;
    opacity: 0.8;
    flex-shrink: 0;
}

// Sidebar Footer
.sidebar-footer {
    padding: 1rem 0;
    margin-top: auto;
    border-top: 1px solid @border-default;
    flex-shrink: 0;
    position: relative;
}

// User Context Menu
.user-context-menu {
    position: absolute;
    bottom: calc(100% + 4px);
    left: 0;
    right: 0;
    background: @bg-elevated;
    border: 1px solid @border-subtle;
    border-radius: @radius-lg;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.25), 0 2px 8px rgba(0, 0, 0, 0.15);
    padding: @space-1;
    z-index: @z-tooltip;
    animation: contextMenuIn 0.15s ease-out;
}

@keyframes contextMenuIn {
    from {
        opacity: 0;
        transform: translateY(4px) scale(0.98);
    }
    to {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

.context-menu-section {
    padding: 6px 8px;
}

.context-menu-label {
    font-size: 0.65rem;
    font-weight: @font-weight-semibold;
    color: @text-secondary;
    text-transform: uppercase;
    letter-spacing: 0.06em;
    margin-bottom: 6px;
    opacity: 0.6;
}

.theme-switcher {
    display: flex;
    gap: 2px;
    background: @bg-secondary;
    border-radius: @radius-md;
    padding: 2px;
}

.theme-btn {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 6px 0;
    border: none;
    background: transparent;
    color: @text-tertiary;
    border-radius: @radius-sm;
    cursor: pointer;
    transition: all 0.15s ease;

    &:hover {
        color: @text-primary;
    }

    &.active {
        background: @accent-glow;
        color: @accent-primary;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.15);
    }
}

.context-menu-divider {
    height: 1px;
    background: @border-subtle;
    margin: @space-1 0;
}

.context-menu-item {
    display: flex;
    align-items: center;
    gap: 10px;
    width: 100%;
    padding: 8px 10px;
    border: none;
    background: transparent;
    color: @text-secondary;
    font-size: 0.82rem;
    font-weight: @font-weight-medium;
    border-radius: @radius-md;
    cursor: pointer;
    transition: all 0.15s ease;
    text-align: left;

    &:hover {
        background: rgba(255, 255, 255, 0.04);
        color: @text-primary;
    }

    &.danger {
        color: @danger;

        &:hover {
            background: rgba(239, 68, 68, 0.1);
            color: @danger;
        }
    }
}

.context-menu-arrow {
    margin-left: auto;
    opacity: 0.4;
}


// User Mini Profile
.user-mini {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 0.5rem;
    cursor: pointer;
    border-radius: @radius-lg;
    transition: all 0.2s ease;

    &:hover {
        background: @bg-secondary;
    }
}

.user-avatar {
    width: 28px;
    height: 28px;
    background: @text-tertiary;
    border-radius: 50%;
    display: grid;
    place-items: center;
    font-size: 0.75rem;
    font-weight: @font-weight-semibold;
    color: white;
}

.user-menu-arrow {
    margin-left: auto;
    color: @text-tertiary;
    opacity: 0.5;
    transition: transform 0.2s ease, opacity 0.2s ease;

    &.open {
        opacity: 1;
        transform: rotate(180deg);
    }
}

.user-mini:hover .user-menu-arrow {
    opacity: 0.8;
}

.user-meta {
    display: flex;
    flex-direction: column;
}

.user-handle {
    font-size: 0.8rem;
    font-weight: @font-weight-medium;
    color: @text-primary;
}

.user-status {
    font-size: 0.7rem;
    color: @success;
    display: flex;
    align-items: center;
    gap: 4px;

    &::before {
        content: '';
        width: 6px;
        height: 6px;
        background: currentColor;
        border-radius: 50%;
    }
}
