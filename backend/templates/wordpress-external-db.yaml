id: wordpress-external-db
name: WordPress (External Database)
version: "6.4"
description: WordPress CMS connecting to an existing external MySQL database. Use this for dev/prod setups sharing the same database with different table prefixes.
icon: https://s.w.org/style/images/about/WordPress-logotype-wmark.png
website: https://wordpress.org
documentation: https://wordpress.org/documentation/
categories:
  - cms
  - blog
  - website
  - development

variables:
  - name: HTTP_PORT
    description: HTTP port for WordPress
    type: port
    default: "8080"
  - name: DB_HOST
    description: External database host (e.g., 192.168.1.100 or db.example.com)
    type: string
    required: true
  - name: DB_PORT
    description: External database port
    type: string
    default: "3306"
  - name: DB_NAME
    description: Database name
    type: string
    default: "wordpress"
    required: true
  - name: DB_USER
    description: Database username
    type: string
    default: "wordpress"
    required: true
  - name: DB_PASSWORD
    description: Database password
    type: password
    required: true
  - name: TABLE_PREFIX
    description: WordPress table prefix (use different prefix for dev vs prod, e.g., wp_dev_)
    type: string
    default: "wp_"

ports:
  - port: 8080
    protocol: tcp
    description: Web interface

volumes:
  - name: html
    path: /var/www/html
    description: WordPress files

compose:
  services:
    wordpress:
      image: wordpress:${VERSION:-6.4-apache}
      container_name: ${APP_NAME}
      restart: unless-stopped
      environment:
        - WORDPRESS_DB_HOST=${DB_HOST}:${DB_PORT}
        - WORDPRESS_DB_USER=${DB_USER}
        - WORDPRESS_DB_PASSWORD=${DB_PASSWORD}
        - WORDPRESS_DB_NAME=${DB_NAME}
        - WORDPRESS_TABLE_PREFIX=${TABLE_PREFIX}
      volumes:
        - wordpress_html:/var/www/html
      ports:
        - "${HTTP_PORT}:80"

  volumes:
    wordpress_html:
