id: wordpress
name: WordPress
version: "6.4"
description: World's most popular content management system for blogs and websites
icon: https://serverkit.ai/imgs/template-icons/wordpress.png
website: https://wordpress.org
documentation: https://wordpress.org/documentation/
categories:
  - cms
  - blog
  - website

variables:
  - name: HTTP_PORT
    description: HTTP port
    type: port
    default: "8080"
    hidden: true
  - name: DB_PASSWORD
    description: MySQL root password
    type: password
    generate: password
    hidden: true
  - name: WP_DB_PASSWORD
    description: WordPress database password
    type: password
    generate: password
    hidden: true

ports:
  - port: 8080
    protocol: tcp
    description: Web interface

volumes:
  - name: html
    path: /var/www/html
    description: WordPress files
  - name: db
    path: /var/lib/mysql
    description: MySQL data

compose:
  services:
    wordpress:
      image: wordpress:${VERSION:-6.4-apache}
      container_name: ${APP_NAME}
      restart: unless-stopped
      environment:
        - WORDPRESS_DB_HOST=db
        - WORDPRESS_DB_USER=wordpress
        - WORDPRESS_DB_PASSWORD=${WP_DB_PASSWORD}
        - WORDPRESS_DB_NAME=wordpress
      volumes:
        - wordpress_html:/var/www/html
      ports:
        - "${HTTP_PORT}:80"
      depends_on:
        - db

    db:
      image: mysql:8.0
      container_name: ${APP_NAME}-db
      restart: unless-stopped
      environment:
        - MYSQL_ROOT_PASSWORD=${DB_PASSWORD}
        - MYSQL_DATABASE=wordpress
        - MYSQL_USER=wordpress
        - MYSQL_PASSWORD=${WP_DB_PASSWORD}
      volumes:
        - wordpress_db:/var/lib/mysql

  volumes:
    wordpress_html:
    wordpress_db:
